<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <style>
        body {
            /*background: transparent;*/
            /*background: #112233;*/
            /*color: silver;*/
        }
        #equationam-Frame {
            left: 50%;
            transform: translateX(-50%);
        }
    </style>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            showMathMenu: true,
            extensions: ["tex2jax.js","Safe.js"],
            tex2jax: {
                processEscapes: true,
                inlineMath: [['$','$'], ['\\(','\\)']]
            },
            asciimath2jax: {
                delimiters: [['$','$'], ['`','`']]
            },
            TeX: {
                equationNumbers: { 
                    autoNumber: "AMS",
                    useLabelIds: true
                },
                Macros: {
                    iddots: "{\\kern3mu\\raise1mu{.}\\kern3mu\\raise6mu{.}\\kern3mu\\raise12mu{.}}"
                },
                extensions: ["autoload-all.js"]
            },
            MathML: {
                linebreaks: {
                    automatic: true
                },
                scale: 150,
                extensions: ["content-mathml.js", "mml3.js"]
            },
            CommonHTML: { 
                linebreaks: {
                    automatic: true
                },
                scale: 150 
            },
            'HTML-CSS': { 
                linebreaks: {
                    automatic: true
                },
                scale: 150 
            },
            SVG: {
                linebreaks: {
                    automatic: true
                },
                scale: 150 
            },
        });
    </script>
    <script type="text/javascript" src="/Assets/Statics/js/MathJax/MathJax.js?config=AM_HTMLorMML-full,Safe"></script>

    <script type="text/javascript">
        function LoadMathJax() {
            var head = document.getElementsByTagName('head')[0];
            var script = document.createElement('script');
            script.type = "text/x-mathjax-config";
            script[(window.opera ? "innerHTML" : "text")] =
                "MathJax.Hub.Config({\n" +
                "  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},\n" +
                "  showMathMenu: true,\n" +
                "  MathML: { scale: 150 },\n" +
                "  CommonHTML: { scale: 130 },\n" +
                "  'HTML-CSS': { scale: 150 },\n" +
                "  SVG: { scale: 150 },\n" +
                "});";
            head.appendChild(script);

            script = document.createElement("script");
            script.src = "/Assets/Statics/js/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
            head.appendChild(script);

            return ("OK");
        }

        function ChangeEquation(param) {
            var newequ = "" + param;
            var math = MathJax.Hub.getAllJax()[0];
            MathJax.Hub.Queue(
                //["resetEquationNumbers", MathJax.InputJax.TeX],
                //["PreProcess", MathJax.Hub],
                //["Reprocess", MathJax.Hub],
                ["Text", math, newequ]
            );
            return ("OK");
        }

        function GetPageZoomRatio() {
            //var zv = (window.innerWidth * 100 / document.body.clientWidth) + '%'
            //document.body.style.zoom = zv;

            return (window.devicePixelRatio+'');
        }

        function GetEquationRect() {
            var result = '';
            try {
                var bound = document.querySelector('#equationam-Frame').getBoundingClientRect();
                l = window.scrollX + bound.left;
                t = window.scrollY + bound.top;
                w = bound.width;
                h = bound.height;
                result = l + ',' + t + ',' + w + ',' + h;
            }
            catch(e) {
                result = '0,0,'+ window.innerWidth + ',' + window.innerHeight;
            }
            finally {

            }
            return (result);
        }
        
        function GetMathLog() {
            return ("" + MathJax.Message.Log());
        }
        
        function ChangeBG(color) {
            document.body.style.backgroundColor = color;
            return ("OK");
        }

        function ChangeFG(color) {
            document.body.style.color = color;
            return ("OK");
        }

        function ChangeColor(fgcolor, bgcolor) {
            document.body.setAttribute('style', 'color:' + fgcolor + ';' + 'background-color:' + bgcolor + ';');
            return ("OK");
        }

        function ChangeScale(param) {
            MathJax.Hub.Config({
                showMathMenu: true,
                MathML: { scale: param },
                CommonHTML: { scale: param },
                'HTML-CSS': { scale: param },
                SVG: { scale: param },
            });
            MathJax.Hub.Rerender();
            return ("OK");
        }

        function ChangeAutoNumber(on) {
            var no = "AMS";
            if (typeof (on) === "boolean") {
                no = on ? "AMS" : "none";
                MathJax.Hub.Config({
                    TeX: {
                        equationNumbers: { autoNumber: no }
                    }
                });
                MathJax.Hub.Rerender();
            }
            return ("OK");
        }
    </script>
</head>

<body>
    <!--This is for AsciiMath-->
    <div>
        <script type="math/asciimath; mode=display" id="equationam">
sum_(i=1)^n i^3=((n(n+1))/2)^2
        </script>
    </div>

</body>
</html>
